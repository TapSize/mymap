<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>Карта вертолітних майданчиків</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    html, body {
      margin: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #1e1e1e;
    }
    #map {
      width: 100%;
      height: 100%;
      z-index: 0;
    }
    .info-panel {
      position: absolute;
      top: 0;
      right: 0;
      width: 300px;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 20px;
      overflow-y: auto;
      display: none;
      z-index: 1000;
    }
    .info-panel h2 {
      margin-top: 0;
    }
    .close-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #444;
      color: #fff;
      border: none;
      border-radius: 4px;
      padding: 5px 10px;
      cursor: pointer;
    }
    #helipadMiniMap {
      height: 200px;
      width: 100%;
      border-radius: 8px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <div class="info-panel" id="infoPanel">
    <button class="close-btn" onclick="document.getElementById('infoPanel').style.display='none'">Закрити</button>
    <div id="helipadMiniMap"></div>
    <h2 id="helipadTitle"></h2>
    <p id="helipadDescription"></p>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map').setView([49.95, 23.2], 10);

    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://carto.com/attributions">CARTO</a>',
      subdomains: 'abcd',
      maxZoom: 19
    }).addTo(map);

    const rawHelipads = [
      { title: "Рава-Руська", lat: 50.26875, lng: 23.593583, description: "Розмір, м TLOF/FATO 12×12  50×50 Ємність 1 Курс заходу 350°/170° Висота, м 242 Ухил 0° Покриття Бетон Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Белз", lat: 50.409771, lng: 24.003205, description: "Розмір, м TLOF/FATO 12×12  50×50 Ємність 1 Курс заходу 330°/150° Висота, м 201 Ухил 0° Покриття Бетон Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  126,825 МГц" },
      { title: "Грушів", lat: 50.095244, lng: 23.293486, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 035°/215° Висота, м 238 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Угнів", lat: 50.383417, lng: 23.727528, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 000°/180° Висота, м 215 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Нісмичі", lat: 50.555385, lng: 24.108536, description: "Розмір, м TLOF/FATO 20×20  40×40 Ємність 1 Курс заходу 090°/270° Висота, м 206 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Салаші", lat: 50.153944, lng: 23.389417, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 035°/215° Висота, м 251 Ухил 0° Покриття Грунт-пісок (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Варяж", lat: 50.524417, lng: 24.084667, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 020°/200° Висота, м 213 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інформація»  130,7 МГц" },
      { title: "Нижанковичі", lat: 49.65258, lng: 22.779006, description: "Розмір, м TLOF/FATO 12×12  50×50 Ємність 1 Курс заходу 320°/180° Висота, м 220 Ухил 0° Покриття Бетон Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Краковець", lat: 49.966167, lng: 23.140139, description: "Розмір, м TLOF/FATO 12×12  50×50 Ємність 1 Курс заходу 040°/220° Висота, м 203 Ухил 0° Покриття Залізо  Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Шегіні", lat: 49.795549, lng: 22.96658, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 020°/200° Висота, м 250 Ухил 0° Покриття Асфальт Тип в-та, навантаження Мі-8, 15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Сянки", lat: 49.022194, lng: 22.897055, description: "Розмір, м TLOF/FATO 12×12  50×50 Ємність 1 Курс заходу 310°/130° Висота, м 826 Ухил 0° Покриття Бетон Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Циків", lat: 49.71775, lng: 22.856555, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 050°/230° Висота, м 197 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Лопушанка", lat: 49.278419, lng: 22.74821, description: "Розмір, м TLOF/FATO 15×15  30×30 Ємність 1 Курс заходу 000°/180° Висота, м 604 Ухил 5° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Боберка", lat: 49.22093, lng: 22.743526, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 000°/180° Висота, м 582 Ухил 0° Покриття Грунт(тр.покр.) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Губичі", lat: 49.613944, lng: 22.756555, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 045°/225° Висота, м 325 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Мшанець", lat: 49.337778, lng: 22.767389, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 000°/180° Висота, м 511 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" },
      { title: "Міхове", lat: 49.548139, lng: 22.679889, description: "Розмір, м TLOF/FATO 20×20  50×50 Ємність 1 Курс заходу 060°/240° Висота, м 384 Ухил 0° Покриття Грунт (тр.покров) Тип в-та,навантаження Мі-8,15 т Частота (канал) «Львів-інф.»  130,7МГц" }
    ];

    const infoPanel = document.getElementById('infoPanel');
    const helipadTitle = document.getElementById('helipadTitle');
    const helipadDescription = document.getElementById('helipadDescription');

    let miniMap;

    function showMiniMap(lat, lng) {
      if (miniMap) {
        miniMap.remove();
      }
      miniMap = L.map('helipadMiniMap', {
        attributionControl: false,
        zoomControl: false,
        dragging: false,
        scrollWheelZoom: false,
        doubleClickZoom: false,
        boxZoom: false,
        keyboard: false
      }).setView([lat, lng], 17);

      L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        maxZoom: 19
      }).addTo(miniMap);
    }

    const customIcon = new L.Icon({
      iconUrl: 'https://i.ibb.co/Lz8FnQxK/helipadicon.png',
      iconSize: [32, 32],
      iconAnchor: [16, 32],
      popupAnchor: [0, -32]
    });

    rawHelipads.forEach(pad => {
      const marker = L.marker([pad.lat, pad.lng], { icon: customIcon }).addTo(map);
      marker.on('click', () => {
        helipadTitle.textContent = pad.title;
        helipadDescription.textContent = pad.description;
        infoPanel.style.display = 'block';
        showMiniMap(pad.lat, pad.lng);
      });
    });
  </script>
</body>
</html>
